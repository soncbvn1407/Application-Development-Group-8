<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/admin.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <!--fonts-->
    <!-- <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;1,400;1,500;1,600;1,700;&display=swap" rel="stylesheet"> -->

    <title>Admin Dashboard!</title>
</head>

<body>

    <div class="page-container">
        <div class="page-sidebar-wrapper">
            <div class="sidebar">
                <div class="logo">
                    <div class="d-flex justify-content-center align-items-center">
                        <img src="data:image/png;base64,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"
                            alt="logo" class="logo-img mr-3">
                        <div class="logo-text">
                            FPTBOOK
                        </div>
                    </div>
                </div>
                <div class="user-info d-flex">
                    <div>
                        <img src="https://thumbs.dreamstime.com/b/user-icon-trendy-flat-style-isolated-grey-background-user-symbol-user-icon-trendy-flat-style-isolated-grey-background-123663211.jpg"
                            alt="user-img" class="user-img">
                    </div>
                    <div class="d-flex flex-column">
                        <h5>{{user.name}}</h5>
                        <p>{{user.email}}</p>
                    </div>
                </div>
                <ul class="nav flex-column menu-link">
                    <li class="nav-item">
                        <a href="/admin" class="nav-link"><i class="fal fa-book book-icn"> </i>
                            <p class="text-icn"> Dashboard</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin" class="nav-link">Orders</a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/feedbackManage" class="nav-link">Feedback</a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/manageCustomer" class="nav-link">Customers</a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/updateProfile" class="nav-link">Update Profile</a>
                    </li>


                </ul>
            </div>
        </div>
        <div class="page-content-wrapper">
            <div class="page-content">
                <div class="top-bar d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <div>
                            <img src="https://en.pimg.jp/039/679/153/1/39679153.jpg"
                                width="50" height="50" alt="menu" onclick="toggle()" class="toggler">
                        </div>

                    </div>
                    <div class="d-flex align-items-center">
                        <div class="icon-btn">
                            <img src="https://png.pngtree.com/png-vector/20190505/ourlarge/pngtree-vector-notification-icon-png-image_1022639.jpg"
                                alt="notification" />
                        </div>
                        <div class="icon-btn">
                            <img src="https://i.pinimg.com/736x/59/54/25/595425970319e614f8905603c87aca54--icon-design-ui.jpg"
                                alt="settings" />
                        </div>
                        <div class="log-btn d-flex align-items-center">
                            <div>
                                <img src="https://media.istockphoto.com/vectors/vector-account-user-settings-icon-vector-id479969399"
                                    alt="">
                            </div>
                            <div>
                                <h6>{{user.name}}</h6>
                                <p>{{user.email}}</p>
                            </div>
                        </div>
                        <a href="/logout"><i class="fas fa-sign-out-alt icon-btn logout-btn "> </i></a>
                    </div>
                </div>


                <div class="inner-section">
                    <div class="title_oder">

                        <h2 class="page-title">Dashboard</h2>
                    </div>
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-xl-3 col-12">
                            <div class="dash-card d-flex align-items-center">
                                <div class="img-box order-box d-flex align-items-center justify-content-center mr-5">
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQkZZaqgfcnIuYhWh3nBPEahTquNBidE58Ew&usqp=CAU"
                                        width="80" height="80" alt="cart" />
                                </div>
                                <div class="dash-content">
                                    <a href="/admin">
                                        <h4>Orders</h4>
                                    </a>
                                    <p>{{statistical.orderCounts}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-6 col-xl-3 col-12">
                            <div class="dash-card d-flex align-items-center">
                                <div class="img-box order-box d-flex align-items-center justify-content-center mr-5">
                                    <img src="https://static.vecteezy.com/system/resources/thumbnails/002/238/477/small/feedback-icon-free-vector.jpg"
                                        width="80" height="80" alt="cart" />
                                </div>
                                <div class="dash-content">
                                    <a href="/admin/feedbackManage">
                                        <h4>Feedback</h4>
                                    </a>
                                    <p>{{statistical.feedbackCounts}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-6 col-xl-3 col-12">
                            <div class="dash-card d-flex align-items-center">
                                <div class="img-box customer-box d-flex align-items-center justify-content-center mr-5">
                                    <img src="https://cdn3.vectorstock.com/i/1000x1000/33/82/buyer-with-shopping-bags-line-icon-customer-sign-vector-31643382.jpg"
                                        width="80" height="80" alt="customers" />
                                </div>
                                <div class="dash-content">
                                    <a href="/admin/manageCustomer">
                                        <h4>Customers</h4>
                                    </a>

                                    <p>{{statistical.customerCounts}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-6 col-xl-3 col-12">
                            <div class="dash-card d-flex align-items-center">
                                <div class="img-box product-box d-flex align-items-center justify-content-center mr-5">
                                    <img src="https://cdn1.vectorstock.com/i/1000x1000/79/10/product-icon-simple-element-vector-27077910.jpg"
                                        width="80" height="80" alt="cart" />
                                </div>
                                <div class="dash-content">
                                    <a href="/admin/product">
                                        <h4>Products</h4>
                                    </a>
                                    <p>{{statistical.bookCounts}}</p>
                                </div>
                            </div>
                        </div>
                    </div>



                    {{#if feedback}}
                    <div class="row">
                        <div class="container-fluid">
                            <div class="dash-card">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h4>Feedback</h4>
                                </div>
                                <label>Find by:</label>
                                <a style="margin: 0 2rem 0 2rem;" href="/admin/feedbackManage">All</a>
                                <a style="margin: 0 2rem 0 2rem;" href="/admin/feedbackManage/today">Today</a>
                                <a style="margin: 0 2rem 0 2rem;" href="/admin/feedbackManage/2days">2 days</a>
                                <a style="margin: 0 2rem 0 2rem;" href="/admin/feedbackManage/2weeks">2 weeks</a>
                                <a style="margin: 0 2rem 0 2rem;" href="/admin/feedbackManage/2months">2 months</a>
                                <span style="float: right;">
                                    <label for="date">Find by specify date:</label>
                                    <input type="date" name="date" id="date"
                                        onchange="window.location.href = '/admin/feedbackManage/specifyDay/' + event.target.value">
                                </span>
                                <form action="/admin/feedbackManage/searchFeedback" method="GET">
                                    <input type="text" name="bookName">
                                    <button type="submit">Find</button>
                                </form>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Username</th>
                                                <th>Product</th>
                                                <th>Feedback</th>
                                                <th>Time</th>
                                                <th>Reply</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {{#each feedback}}
                                            <tr>
                                                <td>{{username}}</td>
                                                <td>{{name}}</td>
                                                <td>{{feedback}}</td>
                                                <td>{{timeString}}</td>
                                                <td>{{reply}}</td>
                                                <td><button
                                                        onclick="confirmFeedback('/admin/feedbackManage/delete?id={{_id}}', 'Are you sure to delete feedback of {{username}}')">Delete</button>
                                                    {{#ifeq reply undefined}}
                                                    <button onclick="confirmReply('{{_id}}')">Reply</button>
                                                    {{/ifeq}}
                                                </td>
                                            </tr>
                                            {{/each}}
                                            <form id="formReplyFeedback" action="/admin/feedbackManage/reply"
                                                method="post">
                                                <input type="hidden" id="_id" />
                                                <input type="hidden" id="replyContent" />
                                            </form>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                {{else if customerOrder}}
                <div class="row">
                    <div class="container-fluid">
                        <div class="dash-card">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4>Orders</h4>
                                <form action="/admin/manageCustomer/searchCustomer" method="GET">
                                    {{!-- <button type="submit">Search</button>
                                    <input type="text" id="Username" name="Username" placeholder="User name..."> --}}
                                </form>
                                <form action="/admin">
                                    <select name="sortBy" required>
                                        <option value="">Choose</option>
                                        <option value="today">Today</option>
                                        <option value="week">Week</option>
                                    </select>
                                    {{#if search}}
                                    <a href="/admin">Clear</a>
                                    {{/if}}
                                    <button type="submit">Find</button>
                                </form>



                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Order</th>
                                            <th>Time</th>
                                            <th>Status</th>
                                            <th>Update Status</th>
                                            <th>Action</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each customerOrder}}
                                        <form action="/admin/updatestatus" method="post">
                                        <input type="hidden" name="id" value="{{_id}}">
                                        <tr>
                                            <td>{{user}}</td>
                                            <td>{{itemString}}</td>
                                            <td>{{time}}</td>
                                            <td>{{Status}}</td>
                                            <td>
                                                <select name="status" id="status">
                                                    <option value="Delivery in progress">Delivery in progress</option>
                                                    <option value="Receiving product">Receiving product</option>
                                                    <option value="Delivery successful">Delivery successful</option>
                                                    <option value="Delivery failed">Delivery failed</option>
                                                </select>
                                                <button type="submit">
                                                    Update Status
                                                </button>
                                            </td>
                                            {{#ifeq Status "Cancel"}}
                                            <td><button onclick="confirmCustomer('/admin/delete?id={{_id}}', 'Are you sure?')">Accept Cancel</button></td>
                                            {{/ifeq}}
                                        </tr>
                                        </form>
                                        {{/each}}
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            {{else if Customer}}
            <div class="row">
                <div class="container-fluid">
                    <div class="dash-card">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>S.No</th>
                                        <th>Customer ID</th>
                                        <th>Customer Name</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each Customer}}
                                    <tr>
                                        <td>{{index}}</td>
                                        <td>{{_id}}</td>
                                        <td>{{userName}}</td>
                                        <td>{{email}}</td>
                                        <td>{{phone}}</td>
                                        <td><button
                                                onclick="confirmCustomer('/admin/deleteCustomer/{{_id}}', 'Are you sure to delete {{userName}}?')">Delete</button>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{else}}
        <h1 style="text-align: center; margin-top: 3rem;">No result!</h1>
        {{/if}}

    </div>
    </div>


    </div>


    </div>
    </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script>
        function confirmDialog(url, mess) {
            if (confirm(mess) == true) { //cofirm == true
                window.location.replace(url);
            } 
        }
        function confirmCustomer(url, mess) {
            if (confirm(mess) == true) {
                window.location.replace(url);
            }
        }
        function confirmFeedback(url, mess) {
            if (confirm(mess) == true) {
                window.location.replace(url);
            }
        }
        function onClickSort() {
            console.log("A")
        }
        function toggle() {
            $('.sidebar').toggleClass('active');
            $('.page-content-wrapper').toggleClass('active');
        }
        function confirmReply(id) {
            var contentReply = prompt("Enter the content reply here...");
            if (contentReply != null) {
                debugger;
                $('#formReplyFeedback').attr('action', '/admin/feedbackManage/reply?id=' + id + '&reply=' + contentReply).submit();
            }
        }        
        $(document).ready(function () {
            $(window).bind('resize', function () {
                if ($(this).width() < 992) {
                    $('.sidebar,.page-content-wrapper').addClass('active');
                    $('.search-bar,.toggler').hide();
                } else {
                    $('.sidebar,.page-content-wrapper').removeClass('active');
                    $('.search-bar,.toggler').show();
                }
            }).trigger('resize');
        });
    </script>
</body>